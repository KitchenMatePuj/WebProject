<div class="dashboard-container">
  <!-- Sidebar con clase dinámica 'expanded' controlada por Angular -->
  <nav
    class="sidebar"
    [class.expanded]="hovering"
    (mouseenter)="hovering = true"
    (mouseleave)="hovering = false"
  >
    <div class="menu-container">
      <div class="menu-top">
        <!-- Logo de la aplicación -->
        <img
          class="logo"
          src="assets/icons/logo-icon.png"
          alt="Logo de KitchenMate">
        <!-- Perfil -->
        <div class="profile" (click)="goToProfile()">
          <img
            class="profile-pic"
            src="assets/icons/admin-profile.svg"
            alt="Admin Profile"
          />
          <span class="profile-name">Admin</span>
        </div>

        <!-- Opciones de menú -->
        <ul>
          <li [class.active]="currentSection === 'dashboard'">
            <a (click)="goToDashboard()">
              <img class="sidebar-icon" src="assets/icons/dashboard-icon.png" />
              <span class="menu-text">Dashboard</span>
            </a>
          </li>
          <li>
            <a (click)="goToSearchUsers()">
              <img
                class="sidebar-icon"
                src="assets/icons/users-icon.png"
                alt="Usuarios"
              />
              <span class="menu-text">Usuarios</span>
            </a>
          </li>
          <li>
            <a (click)="goToRecipes()">
              <img
                class="sidebar-icon"
                src="assets/icons/recipes-icon.png"
                alt="Recetas"
              />
              <span class="menu-text">Recetas</span>
            </a>
          </li>
          <li>
            <a (click)="goToComments()">
              <img
                class="sidebar-icon"
                src="assets/icons/administration-icon.png"
                alt="Administración"
              />
              <span class="menu-text">Administración</span>
            </a>
          </li>
          <li>
            <a (click)="logout()">
              <img
                class="sidebar-icon"
                src="assets/icons/help-icon.png"
                alt="Cerrar Sesión"
              />
              <span class="menu-text">Cerrar Sesión</span>
            </a>
          </li>
        </ul>
      </div>

      <!-- Versión -->
      <div class="version-info">
        <p>KitchenMate</p>
        <p>Versión 1.0.0.11</p>
      </div>
    </div>
  </nav>

  <!-- Contenido principal -->
  <main class="content">
    <div class="dashboard-cards">
      <!-- Estado de Perfiles -->
      <div class="card">
        <h3>Estado de Perfiles</h3>
        <div class="card-content">
          <table>
            <thead>
              <tr>
                <th>Profile ID</th>
                <th>Nombre</th>
                <th>Email</th>
                <th>Estado Cuenta</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let p of profiles">
                <td>{{ p.profile_id }}</td>
                <td>{{ p.first_name }} {{ p.last_name }}</td>
                <td>{{ p.email }}</td>
                <td>{{ p.account_status }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Recetas más guardadas -->
      <div class="card">
        <h3>Recetas más guardadas</h3>
        <div class="card-content">
          <canvas
            baseChart
            [data]="mostSavedDonutData"
            [options]="mostSavedDonutOptions"
            chartType="doughnut"
          >
          </canvas>
        </div>
      </div>

      <!-- Recetas con buena valoración -->
      <div class="card">
        <h3>Recetas con buena valoración</h3>
        <div class="card-content">
          <ul>
            <li *ngFor="let recipe of recipes">
              {{ recipe.title }} - ⭐ {{ recipe.rating_avg }}
            </li>
          </ul>
        </div>
      </div>

      <!-- Total de Recetas -->
      <div class="card">
        <h3>Total de Recetas</h3>
        <div class="card-content">
          <p *ngIf="totalCount.total_recipes !== null">
            Total de recetas: {{ totalCount.total_recipes }}
          </p>
          <p *ngIf="totalCount.total_recipes === null">
            Cargando o sin datos...
          </p>
        </div>
      </div>
    </div>
  </main>
</div>
